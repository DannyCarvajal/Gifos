const inputsug=document.getElementsByClassName("inputsuggestion")[0];function validateArrow(e){if(38===e.keyCode||40===e.keyCode)return e.preventDefault();suggestionreq()}inputsug.addEventListener("keyup",validateArrow);const borderinput=document.getElementsByClassName("border-buscador-seccion1")[0],lupaactive=document.getElementsByClassName("lupa")[0];let timeout=null;var activecontador=0,termsResponse;function suggestionreq(){if(clearTimeout(timeout),""===inputsug.value)eraseSearch();else{lupaactive.setAttribute("src","Assets/icon-search-active.svg"),lupaactive.setAttribute("style"," position:absolute; right:0px;   left:20px; ");let cross=document.createElement("img");cross.className="navactive crosscleaner xfade",cross.setAttribute("src","Assets/close.svg"),cross.setAttribute("style","position:absolute; top:18px; right:23px; cursor:pointer;"),cross.addEventListener("click",eraseSearch),borderinput.appendChild(cross)}timeout=setTimeout(termsfetch,600)}async function termsfetch(){let term,suggestions=`https://api.giphy.com/v1/gifs/search/tags?q=${inputsug.value}&api_key=${APIkey1}&limit=4`;try{let request=await fetch(suggestions),lengthResponse=(termsResponse=await request.json()).data.length;inputsug.addEventListener("keydown",clearactivenav),document.querySelector(".resultactive")||0===lengthResponse||createTermElements(lengthResponse,termsResponse)}catch(err){console.error("algo ha venido mal en el suggestion",err)}}const createTermElements=lengthResponse=>{let heightborder=80+30*lengthResponse;borderinput.setAttribute("style",`height:${heightborder}px`);let ulinput=document.createElement("ul");ulinput.className="navactive resultactive",ulinput.setAttribute("style","position: absolute; left: 25px; bottom: 24px; display:flex; flex-direction:column; gap:10px; align-items:top"),ulinput.innerHTML="";let linegrey=document.createElement("div");linegrey.className="navactive crosscleaner resultactive",linegrey.setAttribute("style","width:91%; height:1px; margin: 47px auto 0 auto; opacity: 0.5; border: 1px solid #9CAFC3;");for(let i=0;i<lengthResponse;i++){let linputhtml=`\n                    <li style="list-style: none; color:#9CAFC3;display:flex; gap:15px" class="titulo search${i} lupaactive">${termsResponse.data[i].name}\n                        <img src="Assets/icon-search-active.svg" style="width: 15.8px; height: 15.8px; cursor: pointer; order:-1; position:relative; top:2px" class="imglupaactive">\n                    </li>\n                `;ulinput.innerHTML+=linputhtml}borderinput.append(ulinput,linegrey),inputsug.addEventListener("keyup",arrowSearch);let lupaimg=document.getElementsByClassName("lupaactive");for(let i=0;i<lupaimg.length;i++)lupaimg[i].addEventListener("click",()=>{inputsug.value=termsResponse.data[i].name,lupaapi.click()})};let index=-1;const arrowSearch=e=>{let lupalength=document.getElementsByClassName("lupaactive").length;if(40===e.keyCode&&index<lupalength-1){index++;let suggestions=document.getElementsByClassName("lupaactive")[index];0!==index&&document.getElementsByClassName("lupaactive")[index-1].setAttribute("style","list-style: none; color:#9CAFC3;display:flex; gap:15px"),suggestions.setAttribute("style","list-style: none; color: --var(negro); display:flex; gap:15px"),inputsug.value=termsResponse.data[index].name}if(38===e.keyCode&&index>0){index--;let suggestions=document.getElementsByClassName("lupaactive")[index];document.getElementsByClassName("lupaactive")[index+1].setAttribute("style","list-style: none; color:#9CAFC3;display:flex; gap:15px"),suggestions.setAttribute("style","list-style: none; color: --var(negro); display:flex; gap:15px"),inputsug.value=termsResponse.data[index].name}},eraseSearch=()=>{const navactive=document.getElementsByClassName("navactive");lupaactive.setAttribute("style","position:absolute; left:0px; left:unset;  right:20px; "),inputsug.value="",lupaactive.src="Assets/icon-search.svg",borderinput.setAttribute("style","height:50px"),Array.from(navactive).forEach(element=>{element.parentElement.removeChild(element)})};let navactive=document.getElementsByClassName("navactive");const clearactivenav=e=>{if(void 0!==e&&38===e.keyCode||void 0!==e&&40===e.keyCode)return e.preventDefault();index=-1,Array.from(navactive).forEach(element=>{borderinput.removeChild(element)}),borderinput.setAttribute("style","height:50px")};